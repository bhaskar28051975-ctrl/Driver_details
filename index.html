<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sree Kantha â€“ Thumbnail Banner Generator</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #f2f2f2;
}

.page {
  max-width: 900px;
  margin: auto;
  padding: 15px;
}

h2 {
  text-align: center;
  font-size: 32px;
  margin-bottom: 15px;
}

.controls {
  background: #ffffff;
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

.controls label {
  display: block;
  margin-bottom: 10px;
  font-size: 18px;
}

.controls input {
  width: 100%;
  padding: 10px;
  font-size: 18px;
  margin-top: 4px;
}

.controls button {
  margin-top: 10px;
  padding: 12px;
  font-size: 18px;
  width: 100%;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  background: #005aa7;
  color: #fff;
}

.preview-area {
  margin-top: 20px;
  text-align: center;
}

canvas {
  width: 100%;
  max-width: 100%;
  border-radius: 10px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.3);
}

.notes {
  margin-top: 10px;
  text-align: center;
  font-size: 16px;
}
</style>
</head>

<body>

<div class="page">
  <h2>Thumbnail / Banner Generator (16:9 â€” 1280Ã—720)</h2>

  <div class="controls">
    <label>Driver Photo:
      <input id="driverFile" type="file" accept="image/*">
    </label>

    <label>Title:
      <input id="titleInput" type="text" value="Sree Kantha Tour and Travel">
    </label>

    <label>Taxi Number:
      <input id="taxiInput" type="text" value="AP 04 T5621">
    </label>

    <label>Stand Name:
      <input id="standInput" type="text" value="Tirupati">
    </label>

    <label>License Number:
      <input id="licenseInput" type="text" value="APXX/123456">
    </label>

    <label>Phone Number:
  <input id="phoneInput" type="text" value="+91 91540 95125">
</label>

    <button onclick="renderBanner()">Render Banner</button>
    <button onclick="downloadBanner()">Download PNG</button>
  </div>

  <div class="preview-area">
    <canvas id="bannerCanvas" width="1280" height="720"></canvas>
  </div>

  <p class="notes">
    Upload driver photo â†’ Enter details â†’ Render â†’ Download  
  </p>
</div>

<script>
const canvas = document.getElementById("bannerCanvas");
const ctx = canvas.getContext("2d");
let driverImg = new Image();

/* ===== AUTO FONT FIT FUNCTION ===== */
function fitText(ctx, text, maxWidth, startSize, weight="bold") {
  let size = startSize;
  do {
    ctx.font = `${weight} ${size}px Arial`;
    size--;
  } while (ctx.measureText(text).width > maxWidth && size > 25);
  return ctx.font;
}

/* ===== LOAD DRIVER PHOTO ===== */
document.getElementById("driverFile").addEventListener("change", function(e) {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    driverImg.src = reader.result;
  };
  reader.readAsDataURL(file);
});

/* ===== RENDER BANNER ===== */
function renderBanner() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  /* Background */
  const gradient = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
  gradient.addColorStop(0,"#004e92");
  gradient.addColorStop(1,"#000428");
  ctx.fillStyle = gradient;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  /* Driver Photo */
  if (driverImg.src) {
    ctx.drawImage(driverImg, 60, 160, 350, 420);
  }

  const title = document.getElementById("titleInput").value;
  const taxi = document.getElementById("taxiInput").value;
  const stand = document.getElementById("standInput").value;
  const license = document.getElementById("licenseInput").value;
  const phone = document.getElementById("phoneInput").value;

  ctx.fillStyle = "#ffffff";
  ctx.textAlign = "left";

  ctx.shadowColor = "rgba(0,0,0,0.4)";
  ctx.shadowBlur = 6;
  ctx.shadowOffsetX = 2;
  ctx.shadowOffsetY = 2;

  /* TITLE */
  ctx.font = fitText(ctx, title, 750, 80, "bold");
  ctx.fillText(title, 450, 220);

  /* TAXI NUMBER */
  ctx.font = fitText(ctx, taxi, 750, 60, "bold");
  ctx.fillText("Taxi No: " + taxi, 450, 300);

  /* STAND */
  ctx.font = fitText(ctx, stand, 750, 44, "normal");
  ctx.fillText("Stand: " + stand, 450, 360);

  /* LICENSE */
  ctx.font = fitText(ctx, license, 750, 44, "normal");
  ctx.fillText("License: " + license, 450, 420);

  /* PHONE NUMBER âœ… FIXED */
  ctx.font = fitText(ctx, phone, 750, 44, "bold");
  ctx.fillText("ðŸ“ž " + phone, 450, 480);
}

/* ===== DOWNLOAD ===== */
function downloadBanner() {
  const link = document.createElement("a");
  link.download = "banner.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
}
</script>

</body>
</html>
